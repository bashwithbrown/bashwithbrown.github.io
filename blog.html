<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <!-- Essential Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Tre Brown | Software Engineer | Security Analyst | Founder">
    <meta name="description" content="Tre Brown's portfolio showcasing software engineering projects, skills, and experience.">
    <meta name="keywords" content="Tre Brown, software engineer, blog, projects, web development, programming, cybersecurity, IT">
    <meta property="og:title" content="Tre Brown | Software Engineer Portfolio">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bashwithbrown.github.io">
    <meta name="rating" content="general">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Title -->
    <title>Tre Brown &#124; Blog</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="static/ico/portfolio.ico">

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="static/css/styles.css">
    <link rel="stylesheet" type="text/css" href="static/css/animations.css">
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css">
    <script src="static/js/bootstrap.bundle.min.js" async defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>

    <!-- Google Tag Manager -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-X6HLXFW074"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-X6HLXFW074');
    </script>
</head>
<body class="dark-mode">

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark custom-navbar">
        <a class="navbar-brand" href="blog.html" style="margin-left: 10px;">Blog</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                <li class="nav-item"><a href="blog.html" class="nav-link">Blog</a></li>
                <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>
        </div>
    </nav>

    <section id="blog-posts" class="py-5">
        <div class="container">
            <div id="posts-container" class="row">
                <!-- Blog posts will be injected here -->
            </div>
            <div class="spinner-border text-primary mt-3 d-none" role="status" id="loadingSpinner">
              <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <div class="modal fade" id="blogModal" tabindex="-1" aria-labelledby="blogModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="blogModalLabel">Blog Post Title</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div id="blog-content" style="line-height: 1.8; text-align: justify; white-space: pre-wrap;">
                            <!-- Blog content will be loaded here dynamically -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <footer class="text-center text-lg-start">
        <section class="d-flex justify-content-center justify-content-lg-between p-4 border-bottom">
            <div class="me-5 d-none d-lg-block">
                <span>Get connected with me on social networks:</span>
            </div>
            <div>
                <a href="https://twitter.com" class="me-4 text-reset"><i class="bi bi-twitter"></i></a>
                <a href="https://google.com" class="me-4 text-reset"><i class="bi bi-google"></i></a>
                <a href="https://www.instagram.com" class="me-4 text-reset"><i class="bi bi-instagram"></i></a>
                <a href="www.linkedin.com/in/trebrown100" class="me-4 text-reset" target="_blank"><i class="bi bi-linkedin"></i></a>
                <a href="https://github.com/bashwithbrown" class="me-4 text-reset" target="_blank"><i class="bi bi-github"></i></a>
            </div>
        </section>

        <section>
            <div class="container text-center text-md-start mt-5">
                <div class="row mt-3">
                    <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4 text-center">
                        <h6 class="text-uppercase fw-bold mb-4">Useful links</h6>
                        <p><a href="terms-of-service.html" class="text-reset">Terms of Service</a></p>
                        <p><a href="privacy-policy.html" class="text-reset">Privacy Policy</a></p>
                    </div>
                    <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4 text-center">
                        <h6 class="text-uppercase fw-bold mb-4" id="contact-href">Contact</h6>
                        <p><i class="bi bi-house-fill me-3"></i>Worldwide</p>
                        <p><i class="bi bi-envelope-fill me-3"></i><a href="mailto:bashwithbrown@gmail.com" class="text-white">bashwithbrown@gmail.com</a></p>
                    </div>
                </div>
            </div>
        </section>

        <div class="text-center p-4">
            <p class="mb-0">&copy; 2024 Copyright: <a href="#" class="font-weight-bold text-white">Tre Brown. All Rights Reserved.</a></p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        function fetchBlogPosts() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', 'https://bashwithbrown.pythonanywhere.com/api/get-blog-posts', true);

            const loadingSpinner = document.getElementById('loadingSpinner');
            const postsContainer = document.getElementById('posts-container');
            loadingSpinner.classList.remove('d-none');
            postsContainer.innerHTML = '';

            xhr.onload = function() {
                if (xhr.status === 200) {
                    const data = JSON.parse(xhr.responseText);
                    const posts = data.posts;

                    posts.forEach(post => {
                        const colDiv = document.createElement('div');
                        colDiv.className = 'col-md-4 mb-4';

                        const cardDiv = document.createElement('div');
                        cardDiv.className = 'card';

                        const img = document.createElement('img');
                        img.src = `https://bashwithbrown.pythonanywhere.com/static/file_upload/${JSON.parse(post.meta_data).file}`;
                        img.className = 'card-img-top';
                        img.alt = post.title;
                        cardDiv.appendChild(img);
                  
                        const cardBodyDiv = document.createElement('div');
                        cardBodyDiv.className = 'card-body';

                        const titleH5 = document.createElement('h5');
                        titleH5.className = 'card-title';
                        titleH5.innerText = post.title;

                        const readMoreBtn = document.createElement('button');
                        readMoreBtn.className = 'btn btn-primary';
                        readMoreBtn.innerText = 'Read More';
                        readMoreBtn.dataset.slug = post.slug;
                        readMoreBtn.dataset.bsToggle = 'modal';
                        readMoreBtn.dataset.bsTarget = '#blogModal';
                        readMoreBtn.onclick = loadBlogPost;

                        cardBodyDiv.appendChild(titleH5);
                        cardBodyDiv.appendChild(readMoreBtn);
                        cardDiv.appendChild(cardBodyDiv);
                        colDiv.appendChild(cardDiv);
                        postsContainer.appendChild(colDiv);
                    });
                    
                    loadingSpinner.classList.add('d-none');
                } else {
                    console.error('Error fetching blog posts:', xhr.statusText);
                    loadingSpinner.classList.add('d-none');
                }
            };

            xhr.onerror = function() {
                console.error('Error fetching blog posts:', xhr.statusText);
                loadingSpinner.classList.add('d-none');
            };

            xhr.send();
        }

        function loadBlogPost(event) {
            const slug = event.target.dataset.slug;
            const modalTitle = document.getElementById('blogModalLabel');
            const modalBody = document.getElementById('blog-content');

            const xhr = new XMLHttpRequest();
            xhr.open('GET', `https://bashwithbrown.pythonanywhere.com/api/get-blog-post-detailed?slug=${slug}`, true);

            xhr.onload = function() {
                if (xhr.status === 200) {
                    const data = JSON.parse(xhr.responseText);
                    modalTitle.innerText = data.post.title;
                    modalBody.innerHTML = data.post.content;
                } else {
                    console.error('Error loading blog post details:', xhr.statusText);
                    modalBody.innerHTML = '<p class="text-danger">Failed to load blog post details.</p>';
                }
            };

            xhr.onerror = function() {
                console.error('Error loading blog post details:', xhr.statusText);
                modalBody.innerHTML = '<p class="text-danger">Failed to load blog post details.</p>';
            };

            xhr.send();
        }

        document.addEventListener('DOMContentLoaded', fetchBlogPosts);
    </script>

</body>
</html>
